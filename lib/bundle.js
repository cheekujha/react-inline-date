!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.inlineDate=t(require("react")):e.inlineDate=t(e.React)}(window,function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_DATE_TIME=t.TYPE_DATE=t.TYPE_TIME=void 0;var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),r=(i=s)&&i.__esModule?i:{default:i};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h="time",l="date",d={dd:31,mm:12,yyyy:275759,hour:23,min:59},y={dd:1,mm:1,yyyy:1,hour:0,min:0},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.dayInput=void 0,n.monthInput=void 0,n.yearInput=void 0,n.hourInput=void 0,n.minInput=void 0;var i=void 0,a=void 0,o=n.props.type?n.props.type.toLowerCase():l;return n._initMethods(),o===h?(n.props.value&&!isNaN(n.props.value)&&(a=n._processTimeValue(n.props.value)),n.state={hour:a?a.hour:"",min:a?a.min:""}):(n.props.value&&!isNaN(n.props.value)&&(i=n._processDateTimeValue(n.props.value)),n.state={dd:i?i.dd:"",mm:i?i.mm:"",yyyy:i?i.yyyy:"",hour:i?i.hour:"",min:i?i.min:""}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),o(t,[{key:"_initMethods",value:function(){this._processDateTimeValue=this._processDateTimeValue.bind(this),this._processTimeValue=this._processTimeValue.bind(this),this._checkNextChar=this._checkNextChar.bind(this),this._handleDayChange=this._handleDayChange.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._handleYearChange=this._handleYearChange.bind(this),this._handleHourChange=this._handleHourChange.bind(this),this._handleMinuteChange=this._handleMinuteChange.bind(this),this._inputChanged=this._inputChanged.bind(this),this._focusNext=this._focusNext.bind(this),this._focusPrev=this._focusPrev.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this._normalizeValue=this._normalizeValue.bind(this),this._handleUpArrowKey=this._handleUpArrowKey.bind(this),this._handleDownArrowKey=this._handleDownArrowKey.bind(this),this._handleTabKey=this._handleTabKey.bind(this),this._checkCommit=this._checkCommit.bind(this),this._commitValue=this._commitValue.bind(this)}},{key:"componentWillReceiveProps",value:function(e){var t=void 0,n=void 0;this.props.value!=e.value&&void 0!==e.value&&(e.type.toLowerCase()===h?(n=this._processTimeValue(e.value),this.setSate({hour:n?n.hour:"",min:n?n.min:""})):(t=this._processDateTimeValue(e.value),this.setState({dd:t?t.dd:"",mm:t?t.mm:"",yyyy:t?t.yyyy:"",hour:t?t.hour:"",min:t?t.min:""})))}},{key:"_processDateTimeValue",value:function(e){if(void 0!==e)try{var t=new Date(e);return{dd:t.getDate(),mm:t.getMonth()+1,yyyy:t.getFullYear(),hour:t.getHours(),min:t.getMinutes()}}catch(e){return}}},{key:"_processTimeValue",value:function(e){if(void 0!==e){var t=new Date(e);return{hour:t.getHours(),min:t.getMinutes()}}}},{key:"componentDidMount",value:function(){this.props.type===h?this.hourInput&&this.hourInput.focus():this.dayInput&&this.dayInput.focus()}},{key:"_checkNextChar",value:function(e,t){"/"===e[e.length-1]&&(e=e.slice(0,e.length-1),this._focusNext(t))}},{key:"_handleDayChange",value:function(e){var t=!1,n=parseInt(e);return isNaN(n)&&(t=!0),e.length>=2?(e=e.substr(0,2),(n=parseInt(e))<1&&(e=["0",y.dd].join("")),this._focusNext("dd")):n>3&&this._focusNext("dd"),n>d.dd&&(t=!0),t?""===e?"":this.state.dd:e}},{key:"_handleMonthChange",value:function(e){var t=!1,n=parseInt(e);return isNaN(n)&&(t=!0),e.length>=2?(e=e.substr(0,2),(n=parseInt(e))<1&&(e=["0",y.mm].join("")),this._focusNext("mm")):n>1&&this._focusNext("mm"),n>d.mm&&(t=!0),t?""===e?"":this.state.mm:e}},{key:"_handleYearChange",value:function(e){var t=!1,n=parseInt(e);return isNaN(n)&&(t=!0),e.length>=4&&(e=e.substr(0,4),(n=parseInt(e))<1&&(e="0001"),this._focusNext("yyyy")),void 0!=a(this.props.minYear)&&parseInt(e)<this.props.minYear&&(t=!0),t?""===e?"":this.state.yyyy:e}},{key:"_handleHourChange",value:function(e){var t=!1,n=parseInt(e);return isNaN(n)&&(t=!0),e.length>=2?(e=e.substr(0,2),n=parseInt(e),this._focusNext("hour")):n>2&&this._focusNext("hour"),(n>d.hour||n<y.hour)&&(t=!0),t?""===e?"":this.state.hour:e}},{key:"_handleMinuteChange",value:function(e){var t=!1,n=parseInt(e);return isNaN(n)&&(t=!0),e.length>=2&&(e=e.substr(0,2),n=parseInt(e)),(n>d.minute||n<y.minute)&&(t=!0),t?""===e?"":this.state.min:e}},{key:"_inputChanged",value:function(e){var t=this;return e=e.toLowerCase(),function(n){var i=n.target.value,a={};switch((i=i.trim()).length>0&&t._checkNextChar(i),e){case"dd":a=Object.assign({},a,{dd:t._handleDayChange(i)});break;case"mm":a=Object.assign({},a,{mm:t._handleMonthChange(i)});break;case"yyyy":a=Object.assign({},a,{yyyy:t._handleYearChange(i)});break;case"hour":a=Object.assign({},a,{hour:t._handleHourChange(i)});break;case"min":a=Object.assign({},a,{min:t._handleMinuteChange(i)})}t.setState(a)}}},{key:"_focusNext",value:function(e){switch(e){case"dd":this.monthInput.focus();break;case"mm":this.yearInput.focus();break;case"yyyy":this.hourInput&&this.hourInput.focus();break;case"hour":this.minInput.focus()}}},{key:"_focusPrev",value:function(e){switch(e){case"mm":this.dayInput.focus();break;case"yyyy":this.monthInput.focus();break;case"hour":this.yearInput&&this.yearInput.focus();break;case"min":this.hourInput.focus()}}},{key:"_handleKeyDown",value:function(e){var t=this;return e=e.toLowerCase(),function(n){switch(n.keyCode){case 8:""===n.target.value.trim()&&(t._focusPrev(e),n.preventDefault());break;case 9:t._handleTabKey(e,n);break;case 13:t._checkCommit(t.state,n);break;case 38:t._handleUpArrowKey(e,n);break;case 40:t._handleDownArrowKey(e,n)}}}},{key:"_normalizeValue",value:function(e,t){var n=e.toString().length,i=e,a=("yyyy"===t?4:2)-n;return a>0&&(i=[Array(a+1).join("0"),i].join("")),i}},{key:"_handleUpArrowKey",value:function(e){var t={},n=this.state[e],i=void 0;if(void 0===n||""===n)i="yyyy"===e?["",(new Date).getFullYear()].join(""):y[e];else{var a=parseInt(n);i=a===d[e]?y[e]:a+1}t=Object.assign({},t,u({},e,this._normalizeValue(i,e))),this.setState(t)}},{key:"_handleDownArrowKey",value:function(e){var t={},n=this.state[e],i=void 0;if(void 0===n||""===n)i="yyyy"===e?["",(new Date).getFullYear()].join(""):d[e];else{var a=parseInt(n);i=a===y[e]?d[e]:a-1}t=Object.assign({},t,u({},e,this._normalizeValue(i,e))),this.setState(t)}},{key:"_handleTabKey",value:function(e,t){if(!t.shiftKey)switch(e){case"yyyy":if(this.props.type===l){this._checkCommit(this.state,t,!0),t.preventDefault();break}case"min":this._checkCommit(this.state,t,!0),t.preventDefault()}}},{key:"_checkCommit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;if(this.props.type===h){if(void 0!==e.hour&&""!=e.hour&&void 0!==e.min&&""!=e.min){var a=new Date;a.setHours(parseInt(e.hour)),a.setMinutes(parseInt(e.min)),a.setSeconds(0),a.setMilliseconds(0),i=a.getTime()}}else if("datetime"===this.props.type){if(void 0!==e.mm&&""!=e.mm&&void 0!==e.dd&&""!=e.dd&&void 0!==e.yyyy&&""!=e.yyyy&&void 0!==e.hour&&""!=e.hour&&void 0!==e.min&&""!=e.min)i=new Date(e.yyyy,parseInt(e.mm)-1,parseInt(e.dd),parseInt(e.hour),parseInt(e.min)).getTime()}else{if(void 0!==e.mm&&""!=e.mm&&void 0!==e.dd&&""!=e.dd&&void 0!==e.yyyy&&""!=e.yyyy)i=new Date(e.yyyy,parseInt(e.mm)-1,parseInt(e.dd)).getTime()}void 0!==i?(void 0!==this.props.maxOffset&&i>this.props.maxOffset&&(i=void 0),void 0!==this.props.minOffset&&i<this.props.minOffset&&(i=void 0),(void 0!==i||n)&&this._commitValue(i,t)):n&&this._commitValue(i,t)}},{key:"_commitValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.props.onCommit(e,t)}},{key:"render",value:function(){var e=this,t=void 0,n=void 0;return this.props.type!==l&&"datetime"!==this.props.type||(t=r.default.createElement("div",{className:"date-input-box date"},r.default.createElement("input",{className:"date-input dd",ref:function(t){e.dayInput=t},value:this.state.dd,placeholder:"dd",onChange:this._inputChanged("dd"),onKeyDown:this._handleKeyDown("dd")}),r.default.createElement("span",{className:"stroke"},"/"),r.default.createElement("input",{className:"date-input mm",ref:function(t){e.monthInput=t},value:this.state.mm,placeholder:"mm",onChange:this._inputChanged("mm"),onKeyDown:this._handleKeyDown("mm")}),r.default.createElement("span",{className:"stroke"},"/"),r.default.createElement("input",{className:"date-input yyyy",ref:function(t){e.yearInput=t},value:this.state.yyyy,placeholder:"yyyy",onChange:this._inputChanged("yyyy"),onKeyDown:this._handleKeyDown("yyyy")}))),"datetime"!==this.props.type&&this.props.type!==h||(n=r.default.createElement("div",{className:"date-input-box time"},r.default.createElement("input",{className:"date-input hour",ref:function(t){e.hourInput=t},value:this.state.hour,placeholder:"hh",onChange:this._inputChanged("hour"),onKeyDown:this._handleKeyDown("hour")}),r.default.createElement("span",{className:"stroke"},":"),r.default.createElement("input",{className:"date-input min",ref:function(t){e.minInput=t},value:this.state.min,placeholder:"mm",onChange:this._inputChanged("min"),onKeyDown:this._handleKeyDown("min")}))),r.default.createElement("div",{className:"date-input-editor"},t,n)}}]),t}();t.TYPE_TIME=h,t.TYPE_DATE=l,t.TYPE_DATE_TIME="datetime",t.default=c}])});